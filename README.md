# JR
### (Just Rules)

## JR - This code is Part 2

Keep in mind many of the ideas below don't even begin to pretend they are close in any way shape or form
    to being real.   They are just rather wild ideas - that I bet we can make work.

#### Part 2 
* Rules based on metadata
   * Rule parts have Identity(2) names
   * Rules/Groups of rules end up true or false.
   * Values can be filled from data in Part 1 based on Identity(1) name
   * Additions not written yet:
        * Each rule snippet references a Identity(1) name from Part 1
        * Where clauses in part 1 could be modified based on Part 1's metadata.
        * Allow scheduling of Rules, either by Part 1 data pull or push triggers, or timed, or all.
        * SQL generated by rules, or SQL snippets.  Note SQL is grouped by Rule Groups.

#### Part 1
* Data Queries
* Read data from various data sources (Databases, JMS, LDAP, etc.) based on metadata
  * Metadata 
    * Unique Identity(1) name
    * Is this cached?  For how long secs, mins, hours, days.
    * Allow scheduling of pulled data.  For instance, refresh translations lists automatically ever once in a while.
    * A little advanced, polymorphism, but perhaps allow referencing another set of metadata while just changing the 
        where clause and/or caching default parameters.
        
* Export Data : A rest call, that takes as input the identity name of the data packet, with parameters, and returns
        the data in a list, page, slice, etc.
  * DTOs can be generated easily from the metadata definition and packaged into a separate jar.
  * Even simple CRUD Unit or Integration tests can be generated from the metadata definitions.
  * If you have all paths go through one or two rest calls, you can log each requested Identity(1) name
        and keep statistics of how many of each get called and when.  (Could keep in memory and write to 
        persistent storage once in a while through a backgroup task : see Part 3: Actions).
        
* Import data : A rest call, that takes as input the identity name of the data packet, with parameters, and data.
    The data is then imported into the TD system.    
    * Allow data to be pushed into the cache. (Think DI)

#### Part 3
* Actions
   * Each action has an Identity(3) name
   * Actions may be of various types 
        * Messages - emails, texts, faxes, pages.  Each message type given a Template.  And please
            make themes for templates (start off with a min of two themes).
        * Messages - Data to populate message template macros can come from Parts 1 or 2 based on identity(1 or 2) names
        * Write to JMS queue
        * Write to database
        * Send a snail mail letter.
        * Send a message to someone's refrigerator.
   *         
        
#### Logging
 What if each Data Query, Rule, and Action had an internal TD unique number, perhaps even all driven by the same sequence.
 Then we could log just that Id Number, the time, and and IP Address and/or Hospital id to a cloud persistent 
 data source, most likely through a fire and forget queue push.  Then TD could tell which Rules, and Actions 
 where used how often, which ones could be retired, etc.  Also, the stats would give basic aggragate data about
 various groupings of Rules and Actions.
 
#### Versioning
 Versioning of software would become less of a problem among this group of subsystems.  Since the sub=systems just 
 execute based on metadata, they wouldn't have to be changed as often.  And updates could be just new metadata files,
 the old ones could be left asis, or retired.  We assume that all new metadata engine changes would always run
 older metadata for all time.

#### TRS 
 We could just add a small part to TRS to make dynamic rest calls based on meta data (see Part 1).  The great 
 thing is this helps to eliminate version problems - because each new version should run all older 
 meta data snippets.  I have an idea about that.

#### DI
 What if the DI team could build Data Query metadata to pull data from client systems and use rules and alerts to 
wirte data
           

  